{% extends 'base.html' %}
{% load static %}

{% block header %}

<header class="headerProfil">
    <nav class="container">
        <div>
            <a class="BTN-zayvka">
                Подать заявку
            </a>
        </div>
        {% if user.is_superuser %}
            <div class="categoryBlock">
                <input type="button" value="Добавить категорию" class="categoryAdd"/>
                <input type="button" value="Удалить категорию" class="categoryDelete"/>
            </div> 
        {% endif %}

        <div>
            <img src="{% static 'icons/user.svg' %}" alt="">
        </div>

        <div class="FIO">
            {% if user.first_name %}
                <a>{{ user.first_name }}</a>
            {% else %}
                <a>{{ user.username }}</a>
            {% endif %}
        </div>
        <div>
            <a class="logout" href="{% url 'logout'%}" >Выход</a>
        </div>

    </nav>
</header>


{% endblock header %}





{% block content %}
{% include 'ModalZayvkaUp.html' %}
{% include 'ApplicationDeleteModal.html' %}
{% include 'ApplicationUpdate_form.html' %}
{% include 'ApplicationRejected_form.html' %}
{% include 'CategoryAddModal.html' %}
<main class="zayvkiProfil container">
    <div class="MyZayvki">
        <p>Мои заявки</p>
        <hr>
    </div>

    <div class="applicationBlock">

        {% for application in object_list %}
            <div class="zayvka" id="application">
                {% if application.status  == 'CREATED' %}
                    <img src="{% static 'icons/created.svg' %}" alt="">
                {% endif %}  
                {% if application.status  == 'AGREED' %}
                    <img src="{% static 'icons/agreed.svg' %}" alt="">
                {% endif %}  
                {% if application.status  == 'REJECTED' %}
                    <img src="{% static 'icons/rejected.svg' %}" alt="">
                {% endif %}  
                <div class="imgZayvka ">
                    {% if application.photo %}
                        <img src="{{ application.photo.url }}" alt="asd" class="imgZayvka ">
                    {% endif %}
                </div>
                <div class="textZayvka">
                    <div class="nameZayvka">
                        <h4>{{ application.title }}</h4>
                        <hr>            
                    </div>
                    <p>
                        {{ application.content }}
                    </p>
                    <div class="category"> {{ application.cat}}</div>
                </div>
                {% if application.status == 'CREATED' %}
                    <div class="closeZayvka" href="{% url 'deleteApplication' application.id %}">
                        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 20 20" fill="currentColor">
                        <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
                        </svg>
                    </div>
                {% endif %}
                {% if user.is_superuser %}
                    {% if application.status == 'CREATED' %}
                    <div class="update">
                        <div id="updateAgreed" href="{% url 'updateApplication' application.id %}">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                                </svg>
                        </div>
                        <div id="updateRejected" href="{% url 'rejectedApplication' application.id %}">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" >
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                    {% endif %}
                {% endif %}
            </div>
        {% endfor %}

    <div>





</main>

{% endblock content%}